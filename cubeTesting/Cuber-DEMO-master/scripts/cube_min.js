function Color(e,t,s,i,o){this.name=e,this.initial=t,this.hex=s,this.styleF=i,this.styleB=o}var W=WHITE=new Color("white","W","#FFF","font-weight: bold; color: #888","background-color: #F3F3F3; color: rgba( 0, 0, 0, 0.5 )"),O=ORANGE=new Color("orange","O","#F60","font-weight: bold; color: #F60","background-color: #F60; color: rgba( 255, 255, 255, 0.9 )"),B=BLUE=new Color("blue","B","#146BFB","font-weight: bold; color: #00D","background-color: #146BFB; color: rgba( 255, 255, 255, 0.9 )"),R=RED=new Color("red","R","#F00","font-weight: bold; color: #F00","background-color: #F00; color: rgba( 255, 255, 255, 0.9 )"),G=GREEN=new Color("green","G","#00B050","font-weight: bold; color: #0B5","background-color: #00B050; color: rgba( 255, 255, 255, 0.9 )"),Y=YELLOW=new Color("yellow","Y","#FFD83B","font-weight: bold; color: #ED0","background-color: #FFD83B; color: rgba( 0, 0, 0, 0.5 )"),A=GRAY=new Color("gray","A","#777","font-weight: bold; color: #666","background-color: #777; color: rgba(0,0,0,0.5)"),P=PURPLE=new Color("purple","P","#F0F","font-weight: bold; color: #E0E","background-color: #F0F; color: rgba(255, 255, 255, 0.9)"),COLORLESS=new Color("NA","X","#DDD","color: #EEE","color: #DDD"),COLORMAP={W:W,O:O,B:B,R:R,G:G,Y:Y,A:A,P:P,"":COLORLESS};function Cubelet(e,t,s){var i=this,o=s.colors.map(function(e){return COLORMAP[e]}),n=s.text,c=s.links;this.cube=e,this.id=t||0,this.setAddress(this.id),this.size=e.cubeletSize||140,t=this.addressX*this.size,s=this.addressY*this.size;var u=this.addressZ*this.size;this.anchor=new THREE.Object3D,this.anchor.name="anchor-"+this.id,this.cube?this.cube.threeObject.add(this.anchor):scene.add(this.anchor),"css"===erno.renderMode?((e=document.createElement("div")).classList.add("cubelet"),e.classList.add("cubeletId-"+this.id),this.wrapper=new THREE.CSS3DObject(e)):"svg"===erno.renderMode&&(this.wrapper=new THREE.Object3D,this.plastic=new THREE.Mesh(new THREE.CubeGeometry(e.cubeletSize,e.cubeletSize,e.cubeletSize),new THREE.MeshBasicMaterial({color:16777215,vertexColors:THREE.FaceColors})),this.plastic.position.set(t,s,u),this.wrapper.add(this.plastic),this.wireframe=new THREE.Mesh(new THREE.CubeGeometry(e.cubeletSize,e.cubeletSize,e.cubeletSize),new THREE.MeshBasicMaterial({color:52479,wireframe:!0})),this.wireframe.position.set(t,s,u),this.wrapper.add(this.wireframe)),this.wrapper.name="wrapper-"+this.id,this.wrapper.position.set(t,s,u),this.anchor.add(this.wrapper);var r=0;void 0===o&&(o=[W,O,,,G]),this.faces=[],[0,1,2,3,4,5].forEach(function(e){var t=o[e]||COLORLESS;if(i.faces[e]={},i.faces[e].id=e,i.faces[e].color=t,i.faces[e].normal=Direction.getNameById(e),"css"===erno.renderMode){var s=document.createElement("div");s.classList.add("face"),s.classList.add("face"+Direction.getNameById(e).capitalize()),i.wrapper.element.appendChild(s);var u=document.createElement("div");u.classList.add("wireframe"),s.appendChild(u)}if(t===COLORLESS)"css"===erno.renderMode?s.classList.add("faceIntroverted"):(i.plastic.geometry.faces[e].color.setHex(0),i.plastic.geometry.colorsNeedUpdate=!0);else if(r++,"css"===erno.renderMode){s.classList.add("faceExtroverted"),(u=document.createElement("div")).classList.add("sticker"),u.style.backgroundColor=t.hex;var a=c[e];t=null,a&&((t=document.createElement("a")).href=a,t.target="_blank",t.classList.add("puzzlelink"),t.appendChild(u)),a=n[e];var h=document.createElement("div");h.classList.add("id"),3<=e&&h.classList.add(Direction.getNameById(e)+"Face");var d=document.createElement("span");d.innerText=a,i.faces[e].text=d,h.append(d),t&&t.append(h),s.appendChild(t||u)}else i.plastic.geometry.faces[[3,3,3,3,3,3][e]].color.setHex(colorNameToDecimal(t)),i.plastic.geometry.colorsNeedUpdate=!0}),this.type=["core","center","edge","corner"][r],this.map(),this.front.color&&"white"===this.front.color.name&&"center"===this.type&&"css"===erno.renderMode&&stickerElement.classList.add("stickerLogo"),this.isTweening=!0,this.isEngagedZ=this.isEngagedY=this.isEngagedX=!1,this.z=this.zPrevious=this.y=this.yPrevious=this.x=this.xPrevious=0,this.show(),this.showPlastics(),this.showIntroverts(),this.showStickers(),this.hideTexts(),this.hideWireframes(),this.isTweening=!1,this.opacity=1,this.radius=0}function Cube(e){var t=this;this.isReady=!0,this.isSolving=this.isRotating=this.isShuffling=!1,this.taskQueue=new Queue,this.twistQueue=new Queue(Twist.validate),this.twistDuration=SECOND,this.shuffleMethod=this.PRESERVE_LOGO,this.size=420,this.cubeletSize=140,"css"===erno.renderMode&&(this.domElement=document.createElement("div"),this.domElement.classList.add("cube"),this.threeObject=new THREE.CSS3DObject(this.domElement)),this.threeObject.rotation.set(30..degreesToRadians(),(-30).degreesToRadians(),0),scene.add(this.threeObject),this.rotationDeltaX=.1,this.rotationDeltaY=-.05,this.rotationDeltaZ=0,this.cubelets=[],rawcubedata.forEach(function(e,s){t.cubelets.push(new Cubelet(t,s,e))}),this.map(),"css"===erno.renderMode&&this.faces.forEach(function(e,s){(s=document.createElement("div")).classList.add("faceLabel"),s.classList.add("face"+e.face.capitalize()),s.innerHTML=e.face.toUpperCase(),t.domElement.appendChild(s)}),this.folds=[new Fold(this.front,this.right),new Fold(this.left,this.up),new Fold(this.down,this.back)],!1==this[e="preset"+e.capitalize()]instanceof Function&&(e="presetNormal"),this[e](),requestAnimationFrame(t.loop),$(document).keypress(function(e){0===$("input:focus, textarea:focus").length&&(e=String.fromCharCode(e.which),0<="XxRrLlYyUuDdZzFfBb".indexOf(e)&&t.twistQueue.add(e))})}function Direction(e,t){this.id=e,this.name=t.toLowerCase(),this.initial=t.substr(0,1).toUpperCase(),this.neighbors=[],this.opposite=null}setupTasks=window.setupTasks||[],setupTasks.push(function(){augment(Cubelet,{map:function(){this.front=this.faces[0],this.up=this.faces[1],this.right=this.faces[2],this.down=this.faces[3],this.left=this.faces[4],this.back=this.faces[5],this.colors=(this.faces[0].color?this.faces[0].color.initial:"-")+(this.faces[1].color?this.faces[1].color.initial:"-")+(this.faces[2].color?this.faces[2].color.initial:"-")+(this.faces[3].color?this.faces[3].color.initial:"-")+(this.faces[4].color?this.faces[4].color.initial:"-")+(this.faces[5].color?this.faces[5].color.initial:"-")},setAddress:function(e){this.address=e||0,this.addressX=e.modulo(3).subtract(1),this.addressY=-1*e.modulo(9).divide(3).roundDown().subtract(1),this.addressZ=-1*e.divide(9).roundDown().subtract(1)},inspect:function(e){if(void 0!==e)return this[e].color||"!";e=this.id;var t=this.address;this.type;10>e&&(e="0"+e),10>t&&(t="0"+t)},hasColor:function(e){var t;for(t=0;6>t;t++)if(this.faces[t].color===e){var s=t;break}return void 0!==s&&"front up right down left back".split(" ")[s]},hasColors:function(){var e=this,t=!0;return Array.prototype.slice.call(arguments).forEach(function(s){t=t&&!!e.hasColor(s)}),t},rotate:function(e,t,s){var i=this,o=0,n=0,c=0,u=e.toUpperCase();this.isTweening=!0,"X"===u?(i.isEngagedX=!0,o="X"===e?t:-t):"Y"===u?(i.isEngagedY=!0,n="Y"===e?t:-t):"Z"===u&&(i.isEngagedZ=!0,c="Z"===e?t:-t),this.x+=o.round(),this.y+=n.round(),this.z+=c.round(),e=void 0!==this.cube?this.cube.twistDuration:SECOND,t=[t.absolute().scale(0,90,0,e),250].maximum(),new TWEEN.Tween(this.anchor.rotation).to({x:-o.degreesToRadians(),y:-n.degreesToRadians(),z:-c.degreesToRadians()},t).easing(TWEEN.Easing.Quartic.Out).start().onComplete(function(){render(),i.wrapper.applyMatrix(i.anchor.matrix),i.anchor.rotation.set(0,0,0);var e=i.x.divide(90).round().subtract(i.xPrevious.divide(90).round()).absolute(),t=i.y.divide(90).round().subtract(i.yPrevious.divide(90).round()).absolute(),o=i.z.divide(90).round().subtract(i.zPrevious.divide(90).round()).absolute();if(e){for(;e--;)i.faces=i.x<i.xPrevious?[i.up,i.back,i.right,i.front,i.left,i.down]:[i.down,i.front,i.right,i.back,i.left,i.up],i.map(),void 0!==s&&(s(i.cube.cubelets.slice()),i.cube.map());i.xPrevious=i.x}if(.001>i.x.modulo(90).absolute()&&(i.x=0,i.xPrevious=i.x,i.isEngagedX=!1),t){for(;t--;)i.faces=i.y<i.yPrevious?[i.left,i.up,i.front,i.down,i.back,i.right]:[i.right,i.up,i.back,i.down,i.front,i.left],i.map(),void 0!==s&&(s(i.cube.cubelets.slice()),i.cube.map());i.yPrevious=i.y}if(.001>i.y.modulo(90).absolute()&&(i.y=0,i.yPrevious=i.y,i.isEngagedY=!1),o){for(;o--;)i.faces=i.z<i.zPrevious?[i.front,i.right,i.down,i.left,i.up,i.back]:[i.front,i.left,i.up,i.right,i.down,i.back],i.map(),void 0!==s&&(s(i.cube.cubelets.slice()),i.cube.map());i.zPrevious=i.z}.001>i.z.modulo(90).absolute()&&(i.z=0,i.zPrevious=i.z,i.isEngagedZ=!1),i.isTweening=!1})},show:function(){$(".cubeletId-"+this.id).show(),this.showing=!0},hide:function(){$(".cubeletId-"+this.id).hide(),this.showing=!1},showPlastics:function(){"css"===erno.renderMode?$(".cubeletId-"+this.id+" .face").removeClass("faceTransparent"):this.plastic.material.opacity=1,this.showingPlastics=!0},hidePlastics:function(){"css"===erno.renderMode?$(".cubeletId-"+this.id+" .face").addClass("faceTransparent"):this.plastic.material.opacity=0,this.showingPlastics=!1},showExtroverts:function(){$(".cubeletId-"+this.id+" .faceExtroverted").show(),this.showingExtroverts=!0},hideExtroverts:function(){$(".cubeletId-"+this.id+" .faceExtroverted").hide(),this.showingExtroverts=!1},showIntroverts:function(){$(".cubeletId-"+this.id+" .faceIntroverted").show(),this.showingIntroverts=!0},hideIntroverts:function(){$(".cubeletId-"+this.id+" .faceIntroverted").hide(),this.showingIntroverts=!1},showStickers:function(){"css"===erno.renderMode?$(".cubeletId-"+this.id+" .sticker").show():this.faces.forEach(function(e){e.sticker&&(e.sticker.material.opacity=1)}),this.showingStickers=!0},hideStickers:function(){"css"===erno.renderMode?$(".cubeletId-"+this.id+" .sticker").hide():this.faces.forEach(function(e){e.sticker&&(e.sticker.material.opacity=0)}),this.showingStickers=!1},showWireframes:function(){"css"===erno.renderMode?$(".cubeletId-"+this.id+" .wireframe").show():this.wireframe.material.opacity=1,this.showingWireframes=!0},hideWireframes:function(){"css"===erno.renderMode?$(".cubeletId-"+this.id+" .wireframe").hide():this.wireframe.material.opacity=0,this.showingWireframes=!1},showTexts:function(){$(".cubeletId-"+this.id+" .text").show(),this.showingTexts=!0},hideTexts:function(){$(".cubeletId-"+this.id+" .text").hide(),this.showingTexts=!1},getOpacity:function(){return this.opacity},setOpacity:function(e,t){if(this.opacityTween&&this.opacityTween.stop(),void 0===e&&(e=1),e!==this.opacity){var s=this,i=(e-this.opacity).absolute().scale(0,1,0,SECOND);this.opacityTween=new TWEEN.Tween({opacity:this.opacity}).to({opacity:e},i).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){$(".cubeletId-"+s.id).css("opacity",this.opacity),s.opacity=this.opacity}).onComplete(function(){t instanceof Function&&t()}).start()}},getStickersOpacity:function(e){return $(".cubeletId-"+this.id+" .sticker").css("opacity")},setStickersOpacity:function(e){void 0===e&&(e=.2),$(".cubeletId-"+this.id+" .sticker").css("opacity",e)},getRadius:function(){return this.radius},setRadius:function(e,t){if(!1===this.isTweening&&(e=e||0,void 0===this.radius&&(this.radius=0),this.radius!==e)){var s=(this.radius-e).absolute().scale(0,100,0,SECOND),i=this;new TWEEN.Tween(this.wrapper.position).to({x:this.addressX.multiply(this.size+e),y:this.addressY.multiply(this.size+e),z:this.addressZ.multiply(this.size+e)},s).easing(TWEEN.Easing.Quartic.Out).onComplete(function(){i.radius=e,t instanceof Function&&t()}).start()}}})}),setupTasks=window.setupTasks||[],setupTasks.push(function(){Cube.prototype=Object.create(Group.prototype),Cube.prototype.constructor=Cube,forceAugment(Cube,{map:function(){var e,t=this;for(this.core=new Group,this.centers=new Group,this.edges=new Group,this.corners=new Group,this.crosses=new Group,this.cubelets.forEach(function(e,s){"core"===e.type&&t.core.add(e),"center"===e.type&&t.centers.add(e),"edge"===e.type&&t.edges.add(e),"corner"===e.type&&t.corners.add(e),"center"!==e.type&&"edge"!==e.type||t.crosses.add(e)}),this.left=new Slice(this.cubelets[24],this.cubelets[21],this.cubelets[18],this.cubelets[15],this.cubelets[12],this.cubelets[9],this.cubelets[6],this.cubelets[3],this.cubelets[0]),this.left.name="left",this.middle=new Slice(this.cubelets[25],this.cubelets[22],this.cubelets[19],this.cubelets[16],this.cubelets[13],this.cubelets[10],this.cubelets[7],this.cubelets[4],this.cubelets[1]),this.middle.name="middle",this.right=new Slice(this.cubelets[2],this.cubelets[11],this.cubelets[20],this.cubelets[5],this.cubelets[14],this.cubelets[23],this.cubelets[8],this.cubelets[17],this.cubelets[26]),this.right.name="right",this.up=new Slice(this.cubelets[18],this.cubelets[19],this.cubelets[20],this.cubelets[9],this.cubelets[10],this.cubelets[11],this.cubelets[0],this.cubelets[1],this.cubelets[2]),this.up.name="up",this.equator=new Slice(this.cubelets[21],this.cubelets[22],this.cubelets[23],this.cubelets[12],this.cubelets[13],this.cubelets[14],this.cubelets[3],this.cubelets[4],this.cubelets[5]),this.equator.name="equator",this.down=new Slice(this.cubelets[8],this.cubelets[17],this.cubelets[26],this.cubelets[7],this.cubelets[16],this.cubelets[25],this.cubelets[6],this.cubelets[15],this.cubelets[24]),this.down.name="down",this.front=new Slice(this.cubelets[0],this.cubelets[1],this.cubelets[2],this.cubelets[3],this.cubelets[4],this.cubelets[5],this.cubelets[6],this.cubelets[7],this.cubelets[8]),this.front.name="front",this.standing=new Slice(this.cubelets[9],this.cubelets[10],this.cubelets[11],this.cubelets[12],this.cubelets[13],this.cubelets[14],this.cubelets[15],this.cubelets[16],this.cubelets[17]),this.standing.name="standing",this.back=new Slice(this.cubelets[26],this.cubelets[23],this.cubelets[20],this.cubelets[25],this.cubelets[22],this.cubelets[19],this.cubelets[24],this.cubelets[21],this.cubelets[18]),this.back.name="back",this.faces=[this.front,this.up,this.right,this.down,this.left,this.back],e=0;e<this.cubelets.length;e++)this.cubelets[e].setAddress(e)},getText:function(e){return void 0===e?[this.folds[0].getText(),this.folds[1].getText(),this.folds[2].getText()]:isNumeric(e)&&0<=e&&2>=e?this.folds[e].getText():void 0},setText:function(e,t){void 0===t?(this.folds[0].setText(e),this.folds[1].setText(e),this.folds[2].setText(e)):isNumeric(t)&&0<=t&&2>=t&&this.folds[t].setText(e)},inspect:function(e,t){e=!e,this.front.inspect(e,t),this.up.inspect(e,t),this.right.inspect(e,t),this.down.inspect(e,t),this.left.inspect(e,t),this.back.inspect(e,t)},solve:function(){this.isSolving=!0},isSolved:function(){return this.front.isSolved(FRONT)&&this.up.isSolved(UP)&&this.right.isSolved(RIGHT)&&this.down.isSolved(DOWN)&&this.left.isSolved(LEFT)&&this.back.isSolved(BACK)},twist:function(e){if(e instanceof Twist&&!cube.isTweening()){if(command=e.command,degrees=e.degrees,"X"!==command||cube.isEngagedY()||cube.isEngagedZ())"x"!==command||cube.isEngagedY()||cube.isEngagedZ()?"R"!==command||cube.right.isEngagedY()||cube.right.isEngagedZ()?"r"!==command||cube.right.isEngagedY()||cube.right.isEngagedZ()?"M"!==command||cube.middle.isEngagedY()||cube.middle.isEngagedZ()?"m"!==command||cube.middle.isEngagedY()||cube.middle.isEngagedZ()?"L"!==command||cube.left.isEngagedY()||cube.left.isEngagedZ()?"l"!==command||cube.left.isEngagedY()||cube.left.isEngagedZ()||(t=function(e){cube.cubelets[18]=e[0],cube.cubelets[9]=e[3],cube.cubelets[0]=e[6],cube.cubelets[21]=e[9],cube.cubelets[3]=e[15],cube.cubelets[24]=e[18],cube.cubelets[15]=e[21],cube.cubelets[6]=e[24]},void 0===degrees&&(degrees=cube.left.getDistanceToPeg("X")),cube.left.cubelets.forEach(function(e,s){s===cube.left.cubelets.length-1?e.rotate("X",degrees,t):e.rotate("X",degrees)})):(t=function(e){cube.cubelets[18]=e[24],cube.cubelets[9]=e[21],cube.cubelets[0]=e[18],cube.cubelets[21]=e[15],cube.cubelets[3]=e[9],cube.cubelets[24]=e[6],cube.cubelets[15]=e[3],cube.cubelets[6]=e[0]},void 0===degrees&&(degrees=cube.left.getDistanceToPeg("x")),cube.left.cubelets.forEach(function(e,s){s===cube.left.cubelets.length-1?e.rotate("x",degrees,t):e.rotate("x",degrees)})):(t=function(e){cube.cubelets[1]=e[7],cube.cubelets[10]=e[4],cube.cubelets[19]=e[1],cube.cubelets[4]=e[16],cube.cubelets[22]=e[10],cube.cubelets[7]=e[25],cube.cubelets[16]=e[22],cube.cubelets[25]=e[19]},void 0===degrees&&(degrees=cube.middle.getDistanceToPeg("X")),cube.middle.cubelets.forEach(function(e,s){e.rotate("X",degrees,t)})):(t=function(e){cube.cubelets[1]=e[19],cube.cubelets[10]=e[22],cube.cubelets[19]=e[25],cube.cubelets[4]=e[10],cube.cubelets[22]=e[16],cube.cubelets[7]=e[1],cube.cubelets[16]=e[4],cube.cubelets[25]=e[7]},void 0===degrees&&(degrees=cube.middle.getDistanceToPeg("x")),cube.middle.cubelets.forEach(function(e,s){s===cube.middle.cubelets.length-1?e.rotate("x",degrees,t):e.rotate("x",degrees)})):(t=function(e){cube.cubelets[2]=e[20],cube.cubelets[11]=e[23],cube.cubelets[20]=e[26],cube.cubelets[5]=e[11],cube.cubelets[23]=e[17],cube.cubelets[8]=e[2],cube.cubelets[17]=e[5],cube.cubelets[26]=e[8]},void 0===degrees&&(degrees=cube.right.getDistanceToPeg("x")),cube.right.cubelets.forEach(function(e,s){s===cube.right.cubelets.length-1?e.rotate("x",degrees,t):e.rotate("x",degrees)})):(t=function(e){cube.cubelets[2]=e[8],cube.cubelets[11]=e[5],cube.cubelets[20]=e[2],cube.cubelets[5]=e[17],cube.cubelets[23]=e[11],cube.cubelets[8]=e[26],cube.cubelets[17]=e[23],cube.cubelets[26]=e[20]},void 0===degrees&&(degrees=cube.right.getDistanceToPeg("X")),cube.right.cubelets.forEach(function(e,s){s===cube.right.cubelets.length-1?e.rotate("X",degrees,t):e.rotate("X",degrees)})):(t=function(e){cube.cubelets=[e[18],e[19],e[20],e[9],e[10],e[11],e[0],e[1],e[2],e[21],e[22],e[23],e[12],e[13],e[14],e[3],e[4],e[5],e[24],e[25],e[26],e[15],e[16],e[17],e[6],e[7],e[8]]},void 0===degrees&&(degrees=cube.getDistanceToPeg("x")),cube.cubelets.forEach(function(e,s){s===cube.cubelets.length-1?e.rotate("x",degrees,t):e.rotate("x",degrees)}));else{var t=function(e){cube.cubelets=[e[6],e[7],e[8],e[15],e[16],e[17],e[24],e[25],e[26],e[3],e[4],e[5],e[12],e[13],e[14],e[21],e[22],e[23],e[0],e[1],e[2],e[9],e[10],e[11],e[18],e[19],e[20]]};void 0===degrees&&(degrees=cube.getDistanceToPeg("X")),cube.cubelets.forEach(function(e,s){s===cube.cubelets.length-1?e.rotate("X",degrees,t):e.rotate("X",degrees)})}"Y"!==command||cube.isEngagedX()||cube.isEngagedZ()?"y"!==command||cube.isEngagedX()||cube.isEngagedZ()?"U"!==command||cube.up.isEngagedX()||cube.up.isEngagedZ()?"u"===command&&!cube.up.isEngagedX()&!cube.up.isEngagedZ()?(t=function(e){cube.cubelets[18]=e[20],cube.cubelets[19]=e[11],cube.cubelets[20]=e[2],cube.cubelets[9]=e[19],cube.cubelets[11]=e[1],cube.cubelets[0]=e[18],cube.cubelets[1]=e[9],cube.cubelets[2]=e[0]},void 0===degrees&&(degrees=cube.up.getDistanceToPeg("y")),cube.up.cubelets.forEach(function(e,s){s===cube.up.cubelets.length-1?e.rotate("y",degrees,t):e.rotate("y",degrees)})):"E"!==command||cube.equator.isEngagedX()||cube.equator.isEngagedZ()?"e"!==command||cube.equator.isEngagedX()||cube.equator.isEngagedZ()?"D"!==command||cube.down.isEngagedX()||cube.down.isEngagedZ()?"d"!==command||cube.down.isEngagedX()||cube.down.isEngagedZ()||(t=function(e){cube.cubelets[6]=e[8],cube.cubelets[7]=e[17],cube.cubelets[8]=e[26],cube.cubelets[15]=e[7],cube.cubelets[17]=e[25],cube.cubelets[24]=e[6],cube.cubelets[25]=e[15],cube.cubelets[26]=e[24]},void 0===degrees&&(degrees=cube.down.getDistanceToPeg("Y")),cube.down.cubelets.forEach(function(e,s){s===cube.down.cubelets.length-1?e.rotate("Y",degrees,t):e.rotate("Y",degrees)})):(t=function(e){cube.cubelets[6]=e[24],cube.cubelets[7]=e[15],cube.cubelets[8]=e[6],cube.cubelets[15]=e[25],cube.cubelets[17]=e[7],cube.cubelets[24]=e[26],cube.cubelets[25]=e[17],cube.cubelets[26]=e[8]},void 0===degrees&&(degrees=cube.down.getDistanceToPeg("y")),cube.down.cubelets.forEach(function(e,s){s===cube.down.cubelets.length-1?e.rotate("y",degrees,t):e.rotate("y",degrees)})):(t=function(e){cube.cubelets[21]=e[3],cube.cubelets[22]=e[12],cube.cubelets[23]=e[21],cube.cubelets[12]=e[4],cube.cubelets[14]=e[22],cube.cubelets[3]=e[5],cube.cubelets[4]=e[14],cube.cubelets[5]=e[23]},void 0===degrees&&(degrees=cube.equator.getDistanceToPeg("Y")),cube.equator.cubelets.forEach(function(e,s){s===cube.equator.cubelets.length-1?e.rotate("Y",degrees,t):e.rotate("Y",degrees)})):(t=function(e){cube.cubelets[21]=e[23],cube.cubelets[22]=e[14],cube.cubelets[23]=e[5],cube.cubelets[12]=e[22],cube.cubelets[14]=e[4],cube.cubelets[3]=e[21],cube.cubelets[4]=e[12],cube.cubelets[5]=e[3]},void 0===degrees&&(degrees=cube.equator.getDistanceToPeg("y")),cube.equator.cubelets.forEach(function(e,s){s===cube.equator.cubelets.length-1?e.rotate("y",degrees,t):e.rotate("y",degrees)})):(t=function(e){cube.cubelets[18]=e[0],cube.cubelets[19]=e[9],cube.cubelets[20]=e[18],cube.cubelets[9]=e[1],cube.cubelets[11]=e[19],cube.cubelets[0]=e[2],cube.cubelets[1]=e[11],cube.cubelets[2]=e[20]},void 0===degrees&&(degrees=cube.up.getDistanceToPeg("Y")),cube.up.cubelets.forEach(function(e,s){s===cube.up.cubelets.length-1?e.rotate("Y",degrees,t):e.rotate("Y",degrees)})):(t=function(e){cube.cubelets=[e[18],e[9],e[0],e[21],e[12],e[3],e[24],e[15],e[6],e[19],e[10],e[1],e[22],e[13],e[4],e[25],e[16],e[7],e[20],e[11],e[2],e[23],e[14],e[5],e[26],e[17],e[8]]},void 0===degrees&&(degrees=cube.getDistanceToPeg("y")),cube.cubelets.forEach(function(e,s){s===cube.cubelets.length-1?e.rotate("y",degrees,t):e.rotate("y",degrees)})):(t=function(e){cube.cubelets=[e[2],e[11],e[20],e[5],e[14],e[23],e[8],e[17],e[26],e[1],e[10],e[19],e[4],e[13],e[22],e[7],e[16],e[25],e[0],e[9],e[18],e[3],e[12],e[21],e[6],e[15],e[24]]},void 0===degrees&&(degrees=cube.getDistanceToPeg("Y")),cube.cubelets.forEach(function(e,s){s===cube.cubelets.length-1?e.rotate("Y",degrees,t):e.rotate("Y",degrees)})),"Z"!==command||cube.isEngagedX()||cube.isEngagedY()?"z"!==command||cube.isEngagedX()||cube.isEngagedY()?"F"!==command||cube.front.isEngagedX()||cube.front.isEngagedY()?"f"!==command||cube.front.isEngagedX()||cube.front.isEngagedY()?"S"!==command||cube.standing.isEngagedX()||cube.standing.isEngagedY()?"s"!==command||cube.standing.isEngagedX()||cube.standing.isEngagedY()?"B"!==command||cube.back.isEngagedX()||cube.back.isEngagedY()?"b"!==command||cube.back.isEngagedX()||cube.back.isEngagedY()||(t=function(e){cube.cubelets[18]=e[24],cube.cubelets[19]=e[21],cube.cubelets[20]=e[18],cube.cubelets[21]=e[25],cube.cubelets[23]=e[19],cube.cubelets[24]=e[26],cube.cubelets[25]=e[23],cube.cubelets[26]=e[20]},void 0===degrees&&(degrees=cube.back.getDistanceToPeg("Z")),cube.back.cubelets.forEach(function(e,s){s===cube.back.cubelets.length-1?e.rotate("Z",degrees,t):e.rotate("Z",degrees)})):(t=function(e){cube.cubelets[18]=e[20],cube.cubelets[19]=e[23],cube.cubelets[20]=e[26],cube.cubelets[21]=e[19],cube.cubelets[23]=e[25],cube.cubelets[24]=e[18],cube.cubelets[25]=e[21],cube.cubelets[26]=e[24]},void 0===degrees&&(degrees=cube.back.getDistanceToPeg("z")),cube.back.cubelets.forEach(function(e,s){s===cube.back.cubelets.length-1?e.rotate("z",degrees,t):e.rotate("z",degrees)})):(t=function(e){cube.cubelets[9]=e[11],cube.cubelets[10]=e[14],cube.cubelets[11]=e[17],cube.cubelets[12]=e[10],cube.cubelets[14]=e[16],cube.cubelets[15]=e[9],cube.cubelets[16]=e[12],cube.cubelets[17]=e[15]},void 0===degrees&&(degrees=cube.standing.getDistanceToPeg("z")),cube.standing.cubelets.forEach(function(e,s){s===cube.standing.cubelets.length-1?e.rotate("z",degrees,t):e.rotate("z",degrees)})):(t=function(e){cube.cubelets[9]=e[15],cube.cubelets[10]=e[12],cube.cubelets[11]=e[9],cube.cubelets[12]=e[16],cube.cubelets[14]=e[10],cube.cubelets[15]=e[17],cube.cubelets[16]=e[14],cube.cubelets[17]=e[11]},void 0===degrees&&(degrees=cube.standing.getDistanceToPeg("Z")),cube.standing.cubelets.forEach(function(e,s){s===cube.standing.cubelets.length-1?e.rotate("Z",degrees,t):e.rotate("Z",degrees)})):(t=function(e){cube.cubelets[0]=e[2],cube.cubelets[1]=e[5],cube.cubelets[2]=e[8],cube.cubelets[3]=e[1],cube.cubelets[5]=e[7],cube.cubelets[6]=e[0],cube.cubelets[7]=e[3],cube.cubelets[8]=e[6]},void 0===degrees&&(degrees=cube.front.getDistanceToPeg("z")),cube.front.cubelets.forEach(function(e,s){s===cube.front.cubelets.length-1?e.rotate("z",degrees,t):e.rotate("z",degrees)})):(t=function(e){cube.cubelets[0]=e[6],cube.cubelets[1]=e[3],cube.cubelets[2]=e[0],cube.cubelets[3]=e[7],cube.cubelets[5]=e[1],cube.cubelets[6]=e[8],cube.cubelets[7]=e[5],cube.cubelets[8]=e[2]},void 0===degrees&&(degrees=cube.front.getDistanceToPeg("Z")),cube.front.cubelets.forEach(function(e,s){s===cube.front.cubelets.length-1?e.rotate("Z",degrees,t):e.rotate("Z",degrees)})):(t=function(e){cube.cubelets=[e[2],e[5],e[8],e[1],e[4],e[7],e[0],e[3],e[6],e[11],e[14],e[17],e[10],e[13],e[16],e[9],e[12],e[15],e[20],e[23],e[26],e[19],e[22],e[25],e[18],e[21],e[24]]},void 0===degrees&&(degrees=cube.getDistanceToPeg("z")),cube.cubelets.forEach(function(e,s){s===cube.cubelets.length-1?e.rotate("z",degrees,t):e.rotate("z",degrees)})):(t=function(e){cube.cubelets=[e[6],e[3],e[0],e[7],e[4],e[1],e[8],e[5],e[2],e[15],e[12],e[9],e[16],e[13],e[10],e[17],e[14],e[11],e[24],e[21],e[18],e[25],e[22],e[19],e[26],e[23],e[20]]},void 0===degrees&&(degrees=cube.getDistanceToPeg("Z")),cube.cubelets.forEach(function(e,s){s===cube.cubelets.length-1?e.rotate("Z",degrees,t):e.rotate("Z",degrees)})),t instanceof Function&&(e.completed=Date.now(),$("#twist").text(command).fadeIn(50,function(){var e=this;setTimeout(function(){$(e).fadeOut(500)},50)}))}},showFaceLabels:function(){$(".faceLabel").show(),this.showingFaceLabels=!0},hideFaceLabels:function(){$(".faceLabel").hide(),this.showingFaceLabels=!1},presetBling:function(){var e=this;this.threeObject.position.y=-2e3,new TWEEN.Tween(this.threeObject.position).to({y:0},2*SECOND).easing(TWEEN.Easing.Quartic.Out).start(),this.threeObject.rotation.set(180..degreesToRadians(),180..degreesToRadians(),20..degreesToRadians()),new TWEEN.Tween(this.threeObject.rotation).to({x:25..degreesToRadians(),y:(-30).degreesToRadians(),z:0},3*SECOND).easing(TWEEN.Easing.Quartic.Out).onComplete(function(){e.isReady=!0,updateControls()}).start(),this.isReady=!1,this.cubelets.forEach(function(e){var t;e.anchor.position.set(1e3*e.addressX,1e3*e.addressY,1e3*e.addressZ),"core"===e.type&&(t=(0).random(200)),"center"===e.type&&(t=200..random(400)),"edge"===e.type&&(t=400..random(800)),"corner"===e.type&&(t=800..random(1e3)),new TWEEN.Tween(e.anchor.position).to({x:0,y:0,z:0},SECOND).delay(t).easing(TWEEN.Easing.Quartic.Out).onComplete(function(){e.isTweening=!1}).start(),e.isTweening=!0}),updateControls(this)},presetNormal:function(){$("body").css("background-color","#000"),setTimeout(function(){$(".cubelet").removeClass("purty")},1),this.show(),this.showIntroverts(),this.showPlastics(),this.showStickers(),this.hideTexts(),this.hideWireframes(),this.setOpacity(),this.setRadius(),updateControls(this)},presetText:function(e){$("body").css("background-color","#F00"),setTimeout(function(){$(".cubelet").removeClass("purty")},1);var t=this;setTimeout(function(){t.show(),t.hidePlastics(),t.hideStickers(),t.hideIntroverts(),t.showTexts(),t.hideWireframes(),t.setOpacity(),updateControls(t)},1)},presetLogo:function(){var e=this;this.isReady=!1,this.presetText(),new TWEEN.Tween(e.threeObject.rotation).to({x:0,y:(-45).degreesToRadians(),z:0},2*SECOND).easing(TWEEN.Easing.Quartic.Out).onComplete(function(){updateControls(e),e.isReady=!0,e.twistQueue.add("E20d17")}).start()},presetTextAnimate:function(){var e=[110..absolute().scale(0,90,0,cube.twistDuration),250].maximum();_this=this,cube.shuffleMethod=cube.ALL_SLICES,presetHeroic(virgin),setTimeout(function(){_this.twist("E",20)},1),setTimeout(function(){_this.twist("d",20)},1+SECOND),setTimeout(function(){_this.twist("D",110),_this.isRotating=!0},1+2*SECOND),setTimeout(function(){_this.twist("e",110),_this.isShuffling=!0},1+2*SECOND+e+50),updateControls(this)},presetWireframe:function(e,t){setTimeout(function(){$(".cubelet").removeClass("purty")},1),this.showIntroverts(),void 0===e&&(e=new Group(this.cubelets)),void 0===t&&(t=new Group(this.cubelets)).remove(e),this.show(),t.showPlastics(),t.showStickers(),t.hideWireframes(),e.hidePlastics(),e.hideStickers(),e.showWireframes(),updateControls(this)},presetHighlight:function(e,t){"setup"===erno.state&&this.presetBling(),void 0===e&&(e=new Group(this.cubelets)),void 0===t&&(t=new Group(this.cubelets)).remove(e),t.setOpacity(.1),e.setOpacity(),updateControls(this)},presetHighlightCore:function(){this.presetHighlight(this.core),updateControls(this)},presetHighlightCenters:function(){this.presetHighlight(this.centers),updateControls(this)},presetHighlightEdges:function(){this.presetHighlight(this.edges),updateControls(this)},presetHighlightCorners:function(){this.presetHighlight(this.corners),updateControls(this)},presetHighlightWhite:function(){this.presetHighlight(this.hasColor(WHITE)),updateControls(this)},presetPurty:function(){this.showIntroverts(),setTimeout(function(){$(".cubelet").addClass("purty")},1),this.threeObject.rotation.set(35.3.degreesToRadians(),(-45).degreesToRadians(),0),updateControls(this)},presetDemo:function(){var e=this,t=$("#captions");this.taskQueue.add(function(){e.rotationDeltaX=-.1,e.rotationDeltaY=.15,e.isRotating=!0,e.presetNormal(),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.twistQueue.add("rdRD".multiply(6))},function(){e.back.setOpacity(.2),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.standing.setOpacity(.2),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.twistQueue.add("rdRD".multiply(3))},function(){e.showFaceLabels(),e.twistQueue.add("rdRD".multiply(3))},function(){e.hideFaceLabels(),e.standing.setOpacity(1),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.back.setOpacity(1),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.down.setRadius(90),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.equator.setRadius(90),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.up.setRadius(90),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.twistQueue.add("rdRD".multiply(2))},function(){e.back.setRadius(),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.standing.setRadius(),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.twistQueue.add("rdRD".multiply(2))},function(){var t=new Group(e.cubelets),s=e.hasColors(RED,YELLOW,BLUE);t.remove(s),t.setRadius(),t.setOpacity(.5),s.setRadius(120),s.setOpacity(1),e.back.setRadius(),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},6..seconds())},function(){e.twistQueue.add("rdRD".multiply(2))},function(){e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},6..seconds())},function(){e.setRadius(),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},3..seconds())},function(){t.text("Core").fadeIn(),e.presetHighlightCore(),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},2..seconds())},function(){e.twistQueue.add("rdRD".multiply(2))},function(){t.text("Centers"),e.presetHighlightCenters(),e.twistQueue.add("rdRD".multiply(4))},function(){t.text("Edges"),e.presetHighlightEdges(),e.twistQueue.add("rdRD".multiply(3))},function(){t.text("Corners"),e.presetHighlightCorners(),e.twistQueue.add("rdRD".multiply(3))},function(){t.fadeOut(),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},2..seconds())},function(){e.left.setOpacity(0),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.left.hidePlastics().hideStickers().showWireframes().setOpacity(1),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.middle.setOpacity(0),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.middle.hidePlastics().hideStickers().showWireframes().setOpacity(1),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.right.setOpacity(0),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.right.hidePlastics().hideStickers().showWireframes().setOpacity(1),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.twistQueue.add("rdRD".multiply(3))},function(){e.left.setOpacity(0),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.left.hidePlastics().hideStickers().hideWireframes().showTexts().setOpacity(1),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.middle.setOpacity(0),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.middle.hidePlastics().hideStickers().hideWireframes().showTexts().setOpacity(1),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.right.setOpacity(0),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.right.hidePlastics().hideStickers().hideWireframes().showTexts().setOpacity(1),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.twistQueue.add("rdRD".multiply(3))},function(){e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},8*SECOND)},function(){e.left.setOpacity(0),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.left.showPlastics().showStickers().hideTexts().setOpacity(1),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.middle.setOpacity(0),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.middle.showPlastics().showStickers().hideTexts().setOpacity(1),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.right.setOpacity(0),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){e.right.showPlastics().showStickers().hideTexts().setOpacity(1),e.taskQueue.isReady=!1,setTimeout(function(){e.taskQueue.isReady=!0},SECOND)},function(){0,e.twistQueue.history=[]}),this.taskQueue.isLooping=!0,updateControls(this)},presetDemoStop:function(){this.taskQueue.isLooping=!1,this.twistQueue.empty(),this.taskQueue.empty(),this.isRotating=!1,updateControls(this)},PRESERVE_LOGO:"RrLlUuDdSsBb",ALL_SLICES:"RrLlUuDdFfBb",EVERYTHING:"XxRrLlYyUuDdZzFfBb",loop:function(){if(cube.isRotating&&(cube.threeObject.rotation.x+=cube.rotationDeltaX.degreesToRadians(),cube.threeObject.rotation.y+=cube.rotationDeltaY.degreesToRadians(),cube.threeObject.rotation.z+=cube.rotationDeltaZ.degreesToRadians(),updateControls()),cube.isReady&&!cube.isTweening()){if($("#cubeIsTweening").fadeOut(100),cube.twistQueue.isReady)if(0===cube.twistQueue.future.length){if($("#cubeHasTwistsQueued").fadeOut(100),cube.isShuffling)cube.twistQueue.add(cube.shuffleMethod[cube.shuffleMethod.length.rand()]);else if(cube.isSolving&&window.solver)cube.isSolving=window.solver.consider(cube);else if(!0===cube.taskQueue.isReady){var e=cube.taskQueue.do();e instanceof Function&&e()}}else cube.twist(cube.twistQueue.do()),0<cube.twistQueue.future.length&&$("#cubeHasTwistsQueued").fadeIn(100)}else cube.isTweening&&$("#cubeIsTweening").fadeIn(100);requestAnimationFrame(cube.loop)}})}),Direction.prototype.setRelationships=function(e,t,s,i,o){this.neighbors=[e,t,s,i],this.opposite=o},Direction.getNameById=function(e){return"front up right down left back".split(" ")[e]},Direction.getIdByName=function(e){return{front:0,up:1,right:2,down:3,left:4,back:5}[e]},Direction.getDirectionById=function(e){return[FRONT,UP,RIGHT,DOWN,LEFT,BACK][e]},Direction.getDirectionByInitial=function(e){return{F:FRONT,U:UP,R:RIGHT,D:DOWN,L:LEFT,B:BACK}[e.toUpperCase()]},Direction.getDirectionByName=function(e){return{front:FRONT,up:UP,right:RIGHT,down:DOWN,left:LEFT,back:BACK}[e.toLowerCase()]},Direction.prototype.getRotation=function(e,t,s){if(void 0===t&&(t=this.neighbors[0]),t===this||t===this.opposite)return null;s=void 0===s?1:s.modulo(4);for(var i=0;5>i&&this.neighbors[i]!==t;i++);return this.neighbors[i.add(s*e).modulo(4)]},Direction.prototype.getClockwise=function(e,t){return this.getRotation(1,e,t)},Direction.prototype.getAnticlockwise=function(e,t){return this.getRotation(-1,e,t)},Direction.prototype.getDirection=function(e,t){return this.getRotation(1,t,e.id-1)},Direction.prototype.getUp=function(e){return this.getDirection(UP,e)},Direction.prototype.getRight=function(e){return this.getDirection(RIGHT,e)},Direction.prototype.getDown=function(e){return this.getDirection(DOWN,e)},Direction.prototype.getLeft=function(e){return this.getDirection(LEFT,e)},Direction.prototype.getOpposite=function(){return this.opposite};var FRONT=new Direction(0,"front"),UP=new Direction(1,"up"),RIGHT=new Direction(2,"right"),DOWN=new Direction(3,"down"),LEFT=new Direction(4,"left"),BACK=new Direction(5,"back");FRONT.setRelationships(UP,RIGHT,DOWN,LEFT,BACK),UP.setRelationships(BACK,RIGHT,FRONT,LEFT,DOWN),RIGHT.setRelationships(UP,BACK,DOWN,FRONT,LEFT),DOWN.setRelationships(FRONT,RIGHT,BACK,LEFT,UP),LEFT.setRelationships(UP,FRONT,DOWN,BACK,RIGHT),BACK.setRelationships(UP,LEFT,DOWN,RIGHT,FRONT);var erno={version:20131102.1337,verbosity:1,renderMode:"css",state:"setup",stateFrames:0,stateHistory:["setup"],changeStateTo:function(e){if(erno.state!==e){var t=erno.states[erno.state+"Teardown"],s=erno.states[e+"Setup"];t instanceof Function&&t(),s instanceof Function&&s(),erno.stateHistory.push(e),erno.state=e,erno.stateFrames=0}return!1},states:{setup:function(){window.setupTasks&&setupTasks.forEach(function(e){e()}),setupThree(),setupControls();var e=document.location.search.substr(1);"/"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e=e.charAt(0).toUpperCase()+e.substr(1,e.length),window.cube=new Cube(e),updateControls(),erno.changeStateTo("loop")},loop:function(){animate()}},inspect:function(){window.performance.memory.totalJSHeapSize.divide(1048576).multiply(10).roundDown().divide(10),window.performance.memory.usedJSHeapSize.divide(1048576).multiply(10).roundDown().divide(10);return window.performance.memory.usedJSHeapSize.divide(window.performance.memory.totalJSHeapSize).multiply(1e3).roundDown().divide(10)}};function setupThree(){window.scene=new THREE.Scene;var e=document.getElementById("outer-container").offsetWidth,t=document.getElementById("outer-container").offsetHeight;window.camera=new THREE.PerspectiveCamera(45,e/t,1,6e3),camera.position.z=1500,camera.tanFOV=Math.tan(Math.PI/180*camera.fov/2),camera.oneToOne=function(){return-.5/Math.tan(this.fov*Math.PI/360)*t},camera.lookAt(scene.position),scene.add(camera),window.raycaster=new THREE.Raycaster,window.projector=new THREE.Projector,"css"===erno.renderMode?(window.renderer=new THREE.CSS3DRenderer,renderer.domElement.style.position="absolute",renderer.domElement.style.top=0):"svg"===erno.renderMode?(window.renderer=new THREE.SVGRenderer,renderer.setQuality("low")):"webgl"===erno.renderMode&&(window.renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.shadowMapEnabled=!0),renderer.setSize(e,t),renderer.originalHeight=t,document.getElementById("cube-container").appendChild(renderer.domElement),$(window).resize(onWindowResize)}function setupControls(){window.controls=new THREE.TrackballControls(camera,renderer.domElement),controls.noZoom=controls.noPan=!0,controls.rotateSpeed=.5,controls.autoRotateTheta=135,controls.beginAutoRotate(),controls.mouseUpCallback=function(){controls.stopAutoRotate(),controls.mouseUpCallback=!1}}function onWindowResize(){let e=document.getElementById("outer-container").offsetWidth,t=document.getElementById("outer-container").offsetHeight;camera.aspect=e/t,camera.fov=360/Math.PI*Math.atan(t/renderer.originalHeight*camera.tanFOV),camera.updateProjectionMatrix(),renderer.setSize(e,t),render()}function animate(){if(TWEEN.update(),window.controls&&window.controls instanceof THREE.TrackballControls){var e=camera.position.x,t=camera.position.y,s=camera.position.z,i=camera.rotation.x,o=camera.rotation.y,n=camera.rotation.z;controls.update(),e===camera.position.x&&t===camera.position.y&&s===camera.position.z&&i===camera.rotation.x&&o===camera.rotation.y&&n===camera.rotation.z||updateControls()}render()}function render(){renderer.render(scene,camera)}function updateControls(e){$("#backgroundColorCss").val($("body").css("background-color")),$("#cameraFov").val(camera.fov)}function assessTrueFalseMixed(e,t){0===t?($(e).prop("indeterminate",!1),$(e).prop("checked",!1)):27===t?($(e).prop("indeterminate",!1),$(e).prop("checked",!0)):$(e).prop("indeterminate",!0)}function loop(){var e=erno.states[erno.state];"complete"===document.readyState&&(erno.stateFrames++,e instanceof Function&&e()),requestAnimationFrame(loop)}function Fold(e,t){this.map=[e.northWest[e.face].text,e.north[e.face].text,e.northEast[e.face].text,t.northWest[t.face].text,t.north[t.face].text,t.northEast[t.face].text,e.west[e.face].text,e.origin[e.face].text,e.east[e.face].text,t.west[t.face].text,t.origin[t.face].text,t.east[t.face].text,e.southWest[e.face].text,e.south[e.face].text,e.southEast[e.face].text,t.southWest[t.face].text,t.south[t.face].text,t.southEast[t.face].text]}function Group(){this.cubelets=[],this.add(Array.prototype.slice.call(arguments))}function Queue(e){void 0!==e&&e instanceof Function&&(this.validate=e),this.history=[],this.future=[],this.isReady=!0,this.isLooping=!1}function Slice(){this.cubelets=Array.prototype.slice.call(arguments),this.map()}function Twist(e,t){var s={X:"Cube on X",L:"Left face",M:"Middle slice",R:"Right face",Y:"Cube on Y",U:"Up face",E:"Equator slice",D:"Down face",Z:"Cube on Z",F:"Front face",S:"Standing slice",B:"Back face"}[e.toUpperCase()];if(void 0===s)return!1;null!=t&&0>t&&(e=e.invert(),t=t.absolute());var i=0,o="unwise";e===e.toUpperCase()?(i=1,o="clockwise"):e===e.toLowerCase()&&(i=-1,o="anticlockwise"),this.command=e,this.group=s,this.degrees=t,this.vector=i,this.wise=o,this.created=Date.now(),this.getInverse=function(){return new Twist(e.invert(),t)}}Fold.prototype.getText=function(){var e="";return this.map.forEach(function(t){e+=t.innerHTML}),e},Fold.prototype.setText=function(e){var t;for(e=e.justifyLeft(18),t=0;18>t;t++)this.map[t].innerHTML=e.substr(t,1)},setupTasks=window.setupTasks||[],setupTasks.push(function(){augment(Group,{inspect:function(e){return this.cubelets.forEach(function(t){t.inspect(e)}),this},add:function(){var e=this;return Array.prototype.slice.call(arguments).forEach(function(t){t instanceof Group&&(t=t.cubelets),t instanceof Array?e.add.apply(e,t):e.cubelets.push(t)}),this},remove:function(e){if(e instanceof Group&&(e=e.cubelets),e instanceof Array){var t=this;e.forEach(function(e){t.remove(e)})}for(var s=this.cubelets.length-1;0<=s;s--)this.cubelets[s]===e&&this.cubelets.splice(s,1);return this},isFlagged:function(e){var t=0;return this.cubelets.forEach(function(s){t+=s[e]?1:0}),t},isTweening:function(){return this.isFlagged("isTweening")},isEngagedX:function(){return this.isFlagged("isEngagedX")},isEngagedY:function(){return this.isFlagged("isEngagedY")},isEngagedZ:function(){return this.isFlagged("isEngagedZ")},isEngaged:function(){return this.isEngagedX()+this.isEngagedY()+this.isEngagedZ()},hasProperty:function(e,t){var s=new Group;return this.cubelets.forEach(function(i){i[e]===t&&s.add(i)}),s},hasId:function(e){return this.hasProperty("id",e).cubelets[0]},hasAddress:function(e){return this.hasProperty("address",e).cubelets[0]},hasType:function(e){return this.hasProperty("type",e)},hasColor:function(e){var t=new Group;return this.cubelets.forEach(function(s){s.hasColor(e)&&t.add(s)}),t},hasColors:function(){var e=new Group,t=Array.prototype.slice.call(arguments);return this.cubelets.forEach(function(s){s.hasColors.apply(s,t)&&e.add(s)}),e},getAverageRotation:function(e){var t=0;return this.cubelets.forEach(function(s){t+=s[e.toLowerCase()]}),t/this.cubelets.length},getAverageRotationX:function(){return this.getAverageRotation("x")},getAverageRotationY:function(){return this.getAverageRotation("y")},getAverageRotationZ:function(){return this.getAverageRotation("z")},getDistanceToPeg:function(e){var t=this.getAverageRotation(e),s=e.toUpperCase()===e?"clockwise":"anticlockwise",i=t.add(90).divide(90).roundDown().multiply(90).subtract(t);return"anticlockwise"===s&&(0===(i-=90)&&(i-=90),t+i),i.absolute()},isSolved:function(e){if(e){var t={},s=0;return e instanceof Direction&&(e=e.name),this.cubelets.forEach(function(i){i=i[e].color.name,void 0===t[i]?(t[i]=1,s++):t[i]++}),1===s}return!1},show:function(){return this.cubelets.forEach(function(e){e.show()}),this},hide:function(){return this.cubelets.forEach(function(e){e.hide()}),this},showPlastics:function(){return this.cubelets.forEach(function(e){e.showPlastics()}),this},hidePlastics:function(){return this.cubelets.forEach(function(e){e.hidePlastics()}),this},showExtroverts:function(){return this.cubelets.forEach(function(e){e.showExtroverts()}),this},hideExtroverts:function(){return this.cubelets.forEach(function(e){e.hideExtroverts()}),this},showIntroverts:function(){return this.cubelets.forEach(function(e){e.showIntroverts()}),this},hideIntroverts:function(){return this.cubelets.forEach(function(e){e.hideIntroverts()}),this},showStickers:function(){return this.cubelets.forEach(function(e){e.showStickers()}),this},hideStickers:function(){return this.cubelets.forEach(function(e){e.hideStickers()}),this},showWireframes:function(){return this.cubelets.forEach(function(e){e.showWireframes()}),this},hideWireframes:function(){return this.cubelets.forEach(function(e){e.hideWireframes()}),this},showIds:function(){return this.cubelets.forEach(function(e){e.showIds()}),this},hideIds:function(){return this.cubelets.forEach(function(e){e.hideIds()}),this},showTexts:function(){return this.cubelets.forEach(function(e){e.showTexts()}),this},hideTexts:function(){return this.cubelets.forEach(function(e){e.hideTexts()}),this},getOpacity:function(){var e=0;return this.cubelets.forEach(function(t){e+=t.getOpacity()}),e/this.cubelets.length},setOpacity:function(e,t){return this.cubelets.forEach(function(s){s.setOpacity(e,t)}),this},getRadius:function(){var e=0;return this.cubelets.forEach(function(t){e+=t.getRadius()}),e/this.cubelets.length},setRadius:function(e,t){return this.cubelets.forEach(function(s){s.setRadius(e,t)}),this}})}),Queue.prototype.add=function(){var e=Array.prototype.slice.call(arguments),t=this;void 0!==this.validate&&this.validate instanceof Function&&(e=this.validate(e)),e instanceof Array&&e.forEach(function(e){t.future.push(e)})},Queue.prototype.empty=function(){this.future=[]},Queue.prototype.do=function(){if(this.future.length){var e=this.future.shift();return this.history.push(e),e}this.isLooping&&(this.future=this.history.slice(),this.history=[])},Queue.prototype.undo=function(){if(this.history.length){var e=this.history.pop();return this.future.unshift(e),e}},Queue.prototype.redo=function(){this.do()},setupTasks=window.setupTasks||[],setupTasks.push(function(){augment(Slice,{inspect:function(e,t){void 0===t&&(t=void 0!==this.face?this.face:"front"),t instanceof Direction&&(t=t.name),this.face},map:function(){this.origin=this.cubelets[4],this.north=this.cubelets[1],this.northEast=this.cubelets[2],this.east=this.cubelets[5],this.southEast=this.cubelets[8],this.south=this.cubelets[7],this.southWest=this.cubelets[6],this.west=this.cubelets[3],this.northWest=this.cubelets[0];for(var e=0;6>e;e++)if(this.origin.faces[e].color&&this.origin.faces[e].color!==COLORLESS){this.color=this.origin.faces[e].color,this.face=Direction.getNameById(e);break}this.up=new Group(this.northWest,this.north,this.northEast),this.equator=new Group(this.west,this.origin,this.east),this.down=new Group(this.southWest,this.south,this.southEast),this.left=new Group(this.northWest,this.west,this.southWest),this.middle=new Group(this.north,this.origin,this.south),this.right=new Group(this.northEast,this.east,this.southEast),(e=this.hasType("center"))&&1===e.cubelets.length?(this.center=this.hasType("center"),this.corners=new Group(this.hasType("corner")),this.cross=new Group(this.center,this.hasType("edge")),this.ex=new Group(this.center,this.hasType("corner"))):this.centers=new Group(this.hasType("center")),this.edges=new Group(this.hasType("edge")),this.ring=new Group(this.northWest,this.north,this.northEast,this.west,this.east,this.southWest,this.south,this.southEast),this.dexter=new Group(this.northWest,this.origin,this.southEast),this.sinister=new Group(this.northEast,this.origin,this.southWest)},getLocation:function(e){return e===this.origin?"origin":e===this.north?"north":e===this.northEast?"northEast":e===this.east?"east":e===this.southEast?"southEast":e===this.south?"south":e===this.southWest?"southWest":e===this.west?"west":e===this.northWest&&"northWest"}}),learn(Slice.prototype,Group.prototype)}),Twist.validate=function(){var e,t,s=Array.prototype.slice.call(arguments);for(e=0;e<s.length;e++){var i=s[e];if(lookAhead=e+1<s.length?s[e+1]:void 0,!(i instanceof Twist))if("string"==typeof i){if(1===i.length)s[e]="number"==typeof lookAhead?new Twist(i,lookAhead):new Twist(i);else if(1<i.length){var o=/(-?\d+|[XLMRYUEDZFSB])/gi;for(i=i.match(o),t=0;t<i.length;t++){var n=i[t];if(isNumeric(n))i[t]=+n;else{o=i.slice(0,t);var c=i.slice(t+1);n=n.split(""),i=o.concat(n,c)}}o=s.slice(0,e),c=s.slice(e+1),s=o.concat(i,c),e--}}else i instanceof Direction?s[e]=i.initial:i instanceof Array?(o=s.slice(0,e),c=s.slice(e+1),s=o.concat(i,c)):s.splice(e,1),e--}return s};